import{a as E,b as d,c as R,d as T,e as D,f as g,h as P,i as N,l as M,m as O,p as q,q as A,s as L,t as V}from"./chunk-VZQXUXYV.js";import{j as S,k as F,m as k}from"./chunk-V3FEGXWL.js";import"./chunk-CKMECCOM.js";import{$ as v,$a as t,Ba as a,Qa as p,Ua as f,Wa as m,Z as u,_a as i,ab as c,db as C,eb as h,ib as l,pb as y}from"./chunk-TD6JSMZS.js";var I=class n{authService=u(k);empService=u(A);router=u(S);dialog=u(L);loginForm=new D({username:new g("",[d.required]),password:new g("",[d.required,d.minLength(6)])});ngOnInit(){}onSubmit(){if(this.loginForm.valid){let o=this.loginForm.value;console.log("Form Data:",o);let r={username:o.username??"",password:o.password??""};this.authService.login(r).subscribe({next:e=>{e&&(localStorage.setItem("accessToken",e.data.access_token),localStorage.setItem("refreshToken",e.data.refresh_token),localStorage.setItem("username",o.username??""),this.empService.username.set(o.username??""),this.router.navigate(["/app/home"]))},error:e=>{console.log(e),this.dialog.open(V,{height:"150px",width:"450px",data:{title:e.error.message,isCancel:!1,deleteButtonText:"OK",timeout:5e3}})}})}else console.log("Form is invalid")}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=v({type:n,selectors:[["app-login"]],standalone:!0,features:[y],decls:18,vars:2,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-100"],[1,"w-full","max-w-md","p-8","space-y-4","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[3,"ngSubmit","formGroup"],[1,"text-2xl","font-semibold","text-center","text-gray-700"],[1,"space-y-4"],["for","email",1,"block","text-sm","font-medium","text-gray-600"],["type","text","id","email","formControlName","username","placeholder","Enter your username","required","",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:border-transparent"],["for","password",1,"block","text-sm","font-medium","text-gray-600"],["type","password","id","password","formControlName","password","placeholder","Enter your password","required","",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400","focus:border-transparent"],["type","submit",1,"w-full","px-4","py-2","mt-4","text-white","bg-blue-500","rounded-md","hover:bg-blue-600","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"disabled"],["routerLink","/auth/register",1,"mt-4","text-sm","text-center","cursor-pointer","underline","text-blue-600"]],template:function(r,e){r&1&&(i(0,"div",0)(1,"div",1)(2,"form",2),C("ngSubmit",function(){return e.onSubmit()}),i(3,"h2",3),l(4,"Login"),t(),i(5,"div",4)(6,"div")(7,"label",5),l(8,"Username"),t(),c(9,"input",6),t(),i(10,"div")(11,"label",7),l(12,"Password"),t(),c(13,"input",8),t()(),i(14,"button",9),l(15," Login "),t(),i(16,"p",10),l(17,"Register here"),t()()()()),r&2&&(a(2),f("formGroup",e.loginForm),a(12),f("disabled",!e.loginForm.valid))},dependencies:[q,P,E,R,T,O,N,M,F],changeDetection:0})};function K(n,o){n&1&&(i(0,"span"),l(1,"Username is required"),t())}function H(n,o){n&1&&(i(0,"span"),l(1,"Username must be at least 3 characters"),t())}function z(n,o){if(n&1&&(i(0,"div",7),p(1,K,2,0,"span")(2,H,2,0,"span"),t()),n&2){let r,e,s=h();a(),m(!((r=s.registerForm.get("username"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((e=s.registerForm.get("username"))==null||e.errors==null)&&e.errors.minlength?2:-1)}}function J(n,o){n&1&&(i(0,"span"),l(1,"Email is required"),t())}function Q(n,o){n&1&&(i(0,"span"),l(1,"Please enter a valid email"),t())}function W(n,o){if(n&1&&(i(0,"div",7),p(1,J,2,0,"span")(2,Q,2,0,"span"),t()),n&2){let r,e,s=h();a(),m(!((r=s.registerForm.get("email"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((e=s.registerForm.get("email"))==null||e.errors==null)&&e.errors.email?2:-1)}}function X(n,o){n&1&&(i(0,"span"),l(1,"Password is required"),t())}function Y(n,o){n&1&&(i(0,"span"),l(1,"Password must be at least 6 characters"),t())}function Z(n,o){if(n&1&&(i(0,"div",7),p(1,X,2,0,"span")(2,Y,2,0,"span"),t()),n&2){let r,e,s=h();a(),m(!((r=s.registerForm.get("password"))==null||r.errors==null)&&r.errors.required?1:-1),a(),m(!((e=s.registerForm.get("password"))==null||e.errors==null)&&e.errors.minlength?2:-1)}}function $(n,o){n&1&&(i(0,"span"),l(1,"Please confirm your password"),t())}function ee(n,o){if(n&1&&(i(0,"div",7),p(1,$,2,0,"span"),t()),n&2){let r,e=h();a(),m(!((r=e.registerForm.get("confirmPassword"))==null||r.errors==null)&&r.errors.required?1:-1)}}function te(n,o){n&1&&(i(0,"div",7)(1,"span"),l(2,"Passwords do not match"),t()())}var G=class n{authService=u(k);router=u(S);dialog=u(L);ngOnInit(){}registerForm=new D({email:new g("",[d.required,d.email]),username:new g("",[d.required,d.minLength(3)]),phone:new g("",[]),password:new g("",[d.required,d.minLength(6)]),confirmPassword:new g("",[this.passwordMatchValidator().bind(this),d.required])});passwordMatchValidator(){return o=>{let r=o.root.get("password"),e=o.root.get("confirmPassword");return!r||!e||r.value===e.value?null:{passwordMismatch:!0}}}onSubmit(){if(this.registerForm.valid){let o=this.registerForm.value,r={email:o.email??"",username:o.username??"",phone:o.phone??"",password:o.password??""};console.log("Registration Data:",o),this.authService.register(r).subscribe({next:e=>{e&&this.router.navigate(["/auth/login"])},error:e=>{console.log(e),this.dialog.open(V,{height:"150px",width:"450px",data:{title:e.error.message,isCancel:!1,deleteButtonText:"OK",timeout:5e3}})}})}else console.log("Form is invalid")}static \u0275fac=function(r){return new(r||n)};static \u0275cmp=v({type:n,selectors:[["app-register"]],standalone:!0,features:[y],decls:35,vars:7,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-100"],[1,"w-full","max-w-md","p-8","space-y-4","bg-white","border","border-gray-200","rounded-lg","shadow-lg"],[3,"ngSubmit","formGroup"],[1,"text-2xl","font-semibold","text-center","text-gray-700"],[1,"space-y-4"],["for","username",1,"block","text-sm","font-medium","text-gray-600"],["type","text","id","username","formControlName","username","placeholder","Enter your username",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400"],[1,"mt-1","text-sm","text-red-500"],["for","email",1,"block","text-sm","font-medium","text-gray-600"],["type","email","id","email","formControlName","email","placeholder","Enter your email",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400"],["for","phone",1,"block","text-sm","font-medium","text-gray-600"],["type","tel","id","phone","formControlName","phone","placeholder","Enter your phone number",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400"],["for","password",1,"block","text-sm","font-medium","text-gray-600"],["type","password","id","password","formControlName","password","placeholder","Enter your password",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-600"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"w-full","px-4","py-2","mt-1","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-400"],["type","submit",1,"w-full","px-4","py-2","mt-4","text-white","bg-blue-500","rounded-md","hover:bg-blue-600","disabled:bg-gray-400","disabled:cursor-not-allowed",3,"disabled"],["routerLink","/auth/login",1,"mt-4","text-sm","text-center","cursor-pointer","text-blue-600","hover:text-blue-800"]],template:function(r,e){if(r&1&&(i(0,"div",0)(1,"div",1)(2,"form",2),C("ngSubmit",function(){return e.onSubmit()}),i(3,"h2",3),l(4,"Register"),t(),i(5,"div",4)(6,"div")(7,"label",5),l(8,"Username"),t(),c(9,"input",6),p(10,z,3,2,"div",7),t(),i(11,"div")(12,"label",8),l(13,"Email"),t(),c(14,"input",9),p(15,W,3,2,"div",7),t(),i(16,"div")(17,"label",10),l(18,"Phone"),t(),c(19,"input",11),t(),i(20,"div")(21,"label",12),l(22,"Password"),t(),c(23,"input",13),p(24,Z,3,2,"div",7),t(),i(25,"div")(26,"label",14),l(27,"Confirm Password"),t(),c(28,"input",15),p(29,ee,2,1,"div",7)(30,te,3,0,"div",7),t()(),i(31,"button",16),l(32," Register "),t(),i(33,"p",17),l(34," Already have an account? Login here "),t()()()()),r&2){let s,_,x,w,b;a(2),f("formGroup",e.registerForm),a(8),m((s=e.registerForm.get("username"))!=null&&s.errors&&((s=e.registerForm.get("username"))!=null&&s.touched)?10:-1),a(5),m((_=e.registerForm.get("email"))!=null&&_.errors&&((_=e.registerForm.get("email"))!=null&&_.touched)?15:-1),a(9),m((x=e.registerForm.get("password"))!=null&&x.errors&&((x=e.registerForm.get("password"))!=null&&x.touched)?24:-1),a(5),m((w=e.registerForm.get("confirmPassword"))!=null&&w.errors&&((w=e.registerForm.get("confirmPassword"))!=null&&w.touched)?29:-1),a(),m(!((b=e.registerForm.get("confirmPassword"))==null||b.errors==null)&&b.errors.passwordMismatch&&((b=e.registerForm.get("confirmPassword"))!=null&&b.touched)?30:-1),a(),f("disabled",e.registerForm.invalid)}},dependencies:[q,P,E,R,T,N,M,F],changeDetection:0})};var Te=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:I,pathMatch:"full",data:{title:"login"}},{path:"register",component:G,pathMatch:"full",data:{title:"register"}}];export{Te as AUTH_ROUTES};
