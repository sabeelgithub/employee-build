import{a as L,b as c,c as A,d as G,e as O,f as h,g as se,h as j,i as B,j as me,k as de,l as K,n as pe,o as ce,p as $,q as E,r as fe,s as S,t as F}from"./chunk-6LGO66U5.js";import{h as q,j as b,k as le,m as ue}from"./chunk-PRWDPLB5.js";import"./chunk-CKMECCOM.js";import{$ as y,$a as o,Ba as l,H as X,Kb as ae,La as v,Qa as x,Ua as D,Wa as f,Xa as T,Ya as k,Z as m,Za as N,_a as n,ab as g,bb as I,db as d,eb as u,ha as P,ia as M,ib as a,ja as Z,jb as V,ka as ee,kb as _,lb as te,mb as oe,nb as ie,pb as C,qb as ne,rb as re}from"./chunk-TD6JSMZS.js";var H=class r{dialogRef=m(fe);router=m(b);empService=m(E);ngOnInit(){let t=localStorage.getItem("username");t!==""&&t&&this.empService.username.set(t)}logout(){this.dialogRef.close(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),this.router.navigate(["/auth/login"])}cancel(){this.dialogRef.close()}navigateToChange(){this.dialogRef.close(),this.router.navigate(["/app/change-password"])}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-profile-modal"]],standalone:!0,features:[C],decls:11,vars:1,consts:[[1,"p-6","text-center"],[1,"flex","justify-between"],[1,"text-xl","font-bold","text-gray-800"],[1,"underline","text-blue-500","cursor-pointer",3,"click"],[1,"mt-6","flex","justify-center","space-x-4"],[1,"px-4","py-2","bg-red-500","text-white","rounded-lg","hover:bg-red-600",3,"click"],[1,"px-4","py-2","bg-gray-300","text-gray-800","rounded-lg","hover:bg-gray-400",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),a(3),o(),n(4,"p",3),d("click",function(){return i.navigateToChange()}),a(5,"Change Password"),o()(),n(6,"div",4)(7,"button",5),d("click",function(){return i.logout()}),a(8," Logout "),o(),n(9,"button",6),d("click",function(){return i.cancel()}),a(10," Cancel "),o()()()),e&2&&(l(3),_("Hello, ",i.empService.username(),""))}})};function we(r,t){if(r&1){let e=I();n(0,"tr",13)(1,"td",14),a(2),o(),n(3,"td",14),a(4),o(),n(5,"td",15),a(6),o(),n(7,"td",15)(8,"span",16),d("click",function(){let s=P(e).$implicit,p=u();return M(p.view(s.id))}),a(9,"View"),o()()()}if(r&2){let e=t.$implicit;l(2),V(e.name),l(2),V(e.email),l(2),V(e.position)}}var W=class r{dialog=m(S);empService=m(E);router=m(b);employees=v(void 0);searchTerm="";filteredEmployees(){return this.employees()?.filter(t=>t.name.toLowerCase().includes(this.searchTerm.toLowerCase())||t?.email?.toLowerCase().includes(this.searchTerm.toLowerCase())||t.position.toLowerCase().includes(this.searchTerm.toLowerCase()))}ngOnInit(){this.empService.employeeList().subscribe({next:t=>{console.log(t),this.employees.set(t.data.row_data)}})}view(t){this.router.navigate([`/app/detail/${t}`])}openProfileModal(){this.dialog.open(H,{width:"400px",height:"auto"})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-emp-list"]],standalone:!0,features:[C],decls:28,vars:1,consts:[[1,"p-6","bg-gray-100","h-screen"],[1,"flex","justify-between"],[1,"text-2xl","font-semibold","text-center","text-gray-700","mb-4"],[1,"flex","gap-3"],["routerLink","/app/add",1,"bg-blue-500","px-2","py-1","text-white","rounded-lg","cursor-pointer"],[1,"bg-blue-500","px-2","py-1","text-white","rounded-lg","cursor-pointer",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"w-6","h-6","inline-block","fill-current","text-white"],["d","M12 12c2.67 0 8 1.34 8 4v2H4v-2c0-2.66 5.33-4 8-4zm0-2c-2.21 0-4-1.79-4-4s1.79-4 4-4 4 1.79 4 4-1.79 4-4 4z"],["type","text","placeholder","Search employees by name or position...",1,"w-full","p-2","mb-4","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"ngModelChange","ngModel"],[1,"overflow-x-auto"],[1,"min-w-full","bg-white","rounded-lg","shadow-md"],[1,"bg-gray-200","text-gray-600","uppercase","text-sm","leading-normal"],[1,"py-3","px-6","text-left"],[1,"border-b","border-gray-200","hover:bg-gray-100"],[1,"py-3","px-6","text-gray-800"],[1,"py-3","px-6","text-gray-600"],[1,"bg-blue-500","text-white","p-2","rounded-md","cursor-pointer",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Employee List"),o(),n(4,"div",3)(5,"div")(6,"p",4),a(7,"New +"),o()(),n(8,"div")(9,"p",5),d("click",function(){return i.openProfileModal()}),Z(),n(10,"svg",6),g(11,"path",7),o()()()()(),ee(),n(12,"input",8),ie("ngModelChange",function(p){return oe(i.searchTerm,p)||(i.searchTerm=p),p}),o(),n(13,"div",9)(14,"table",10)(15,"thead")(16,"tr",11)(17,"th",12),a(18,"Name"),o(),n(19,"th",12),a(20,"Email"),o(),n(21,"th",12),a(22,"Position"),o(),n(23,"th",12),a(24,"Action"),o()()(),n(25,"tbody"),k(26,we,10,3,"tr",13,T),o()()()()),e&2&&(l(12),te("ngModel",i.searchTerm),l(14),N(i.filteredEmployees()))},dependencies:[ce,L,A,se,le],changeDetection:0})};function ye(r,t){if(r&1){let e=I();n(0,"div",9)(1,"div",12)(2,"label",13),a(3,"Custom Field Key"),o(),g(4,"input",14),o(),n(5,"div")(6,"label",13),a(7,"Value"),o(),g(8,"input",15),o(),n(9,"button",16),d("click",function(){let s=P(e).$index,p=u();return M(p.removeCustomField(s))}),a(10,"Remove"),o()()}if(r&2){let e=t.$index;D("formGroupName",e)}}var R=class r{dialog=m(S);employeeForm=new O({name:new h("",c.required),position:new h("",c.required),email:new h("",[c.required,c.email]),customFields:new pe([])});empService=m(E);router=m(b);route=m(q);isEditMode=v(!1);employeeId=void 0;ngOnInit(){if(this.route.snapshot.data.type==="edit"){let e=this.route.snapshot.paramMap.get("id");this.isEditMode.set(!0),this.loadEmployeeData()}}get customFields(){return this.employeeForm.get("customFields")}loadEmployeeData(){let t=this.route.snapshot.paramMap.get("id");t&&this.empService.employeeDetail(t).subscribe({next:e=>{let i=e.data;this.employeeForm.patchValue({name:i.name,position:i.position,email:i.email}),i.custom_fields&&Object.entries(i.custom_fields).forEach(([s,p])=>{let w=new O({key:new h(s,c.required),value:new h(p,c.required)});this.customFields.push(w)})}})}addCustomField(){let t=new O({key:new h("",c.required),value:new h("",c.required)});this.customFields.push(t)}removeCustomField(t){this.customFields.removeAt(t)}onSubmit(){if(this.employeeForm.valid){let t=this.employeeForm.value;console.log("Employee Data:",t);let e={};this.customFields.controls.forEach(w=>{let Q=w.get("key")?.value,he=w.get("value")?.value;Q&&(e[Q]=he)});let i={name:t.name??"",email:t.email??"",position:t.position??"",custom_fields:e},s=this.route.snapshot.paramMap.get("id")??"";(this.isEditMode()?this.empService.employeeUpdate(s,i):this.empService.employeeCreate(i)).subscribe({next:w=>{w&&(this.dialog.open(F,{height:"150px",width:"450px",data:{title:this.isEditMode()?"Employee Updated Succesfully":"Employee Added Succesfully",isCancel:!1,deleteButtonText:"OK",timeout:1e3}}),this.router.navigate(["/app/home"]))}}),console.log("Payload to send:",i)}else console.log("Form is not valid")}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-add-edit-emp"]],standalone:!0,features:[C],decls:24,vars:1,consts:[[1,"flex","items-center","h-screen","justify-center"],[1,"p-6","w-1/2","bg-gray-100","shadow-md","rounded-md","mx-auto"],[1,"text-2xl","font-semibold","text-center","text-gray-700","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-gray-700","font-medium","mb-1"],["formControlName","name","type","text","placeholder","Enter employee's name",1,"w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","position","type","text","placeholder","Enter employee's position",1,"w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","email","type","email","placeholder","Enter employee's email",1,"w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formArrayName","customFields",1,"flex","flex-col","gap-2","max-h-52","overflow-y-auto"],[1,"border","p-3","bg-white","rounded-md","shadow-md",3,"formGroupName"],["type","button",1,"w-full","bg-blue-500","text-white","p-2","rounded-md","mt-4",3,"click"],["type","submit",1,"w-full","bg-green-500","text-white","p-2","rounded-md","mt-4"],[1,"mb-2"],[1,"block","text-gray-700","font-medium"],["formControlName","key","type","text","placeholder","Custom Field Key",1,"w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["formControlName","value","type","text","placeholder","Value",1,"w-full","p-2","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","button",1,"text-red-500","mt-2",3,"click"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Employee Details"),o(),n(4,"form",3),d("ngSubmit",function(){return i.onSubmit()}),n(5,"div")(6,"label",4),a(7,"Name"),o(),g(8,"input",5),o(),n(9,"div")(10,"label",4),a(11,"Position"),o(),g(12,"input",6),o(),n(13,"div")(14,"label",4),a(15,"Email"),o(),g(16,"input",7),o(),n(17,"div",8),k(18,ye,11,1,"div",9,T),o(),n(20,"button",10),d("click",function(){return i.addCustomField()}),a(21," Add Custom Field "),o(),n(22,"button",11),a(23,"Save Employee"),o()()()()),e&2&&(l(4),D("formGroup",i.employeeForm),l(14),N(i.customFields.controls))},dependencies:[$,j,L,A,G,B,K,me,de],changeDetection:0})};function xe(r,t){if(r&1&&(n(0,"li",14)(1,"strong"),a(2),o(),a(3),o()),r&2){let e=t.$implicit;l(2),_("",e.key,":"),l(),_(" ",e.value," ")}}function Ce(r,t){if(r&1&&(n(0,"div",8)(1,"h3",12),a(2,"Custom Fields:"),o(),n(3,"ul",13),k(4,xe,4,2,"li",14,T),ne(6,"keyvalue"),o()()),r&2){let e=u(2);l(4),N(re(6,0,e.employee().custom_fields))}}function _e(r,t){if(r&1){let e=I();n(0,"div",2)(1,"h2",4),a(2),o(),n(3,"div",5)(4,"p",6)(5,"strong"),a(6,"Position:"),o(),a(7),o(),n(8,"p",7)(9,"strong"),a(10,"Email:"),o(),a(11),o()(),x(12,Ce,7,2,"div",8),n(13,"div",9)(14,"button",10),d("click",function(){P(e);let s=u();return M(s.editEmployee())}),a(15," Edit "),o(),n(16,"button",11),d("click",function(){P(e);let s=u();return M(s.deleteEmployee())}),a(17," Delete "),o()()()}if(r&2){let e=u();l(2),V(e.employee().name),l(5),_(" ",e.employee().position,""),l(4),_(" ",e.employee().email,""),l(),f(e.employee().custom_fields?12:-1)}}function ve(r,t){r&1&&(n(0,"div",3)(1,"p"),a(2,"Loading employee details..."),o()())}var Y=class r{empService=m(E);route=m(q);router=m(b);dialog=m(S);employee=v(null);constructor(){}ngOnInit(){let t=this.route.snapshot.paramMap.get("id");t&&this.empService.employeeDetail(t).subscribe({next:e=>{console.log(e),this.employee.set(e.data)}})}editEmployee(){let t=this.route.snapshot.paramMap.get("id");this.router.navigate([`/app/edit/${t}`])}deleteEmployee(){this.dialog.open(F,{data:{title:"Are you sure you want to delete this employee?",confirmMessage:"Do you really want to delete this item? This action cannot be undone.",cancelButtonText:"No, Keep It",deleteButtonText:"Yes, Delete"}}).afterClosed().subscribe({next:t=>{t&&this.deleteEmpApi()}})}deleteEmpApi(){let t=this.route.snapshot.paramMap.get("id")??"";this.empService.employeeDelete(t).subscribe({next:e=>{e&&(this.router.navigate(["/app/home"]),this.dialog.open(F,{height:"150px",width:"450px",data:{title:"Employee Deleted Succesfully",isCancel:!1,deleteButtonText:"OK",timeout:1e3}}))}})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-emp-detail"]],standalone:!0,features:[C],decls:4,vars:1,consts:[[1,"flex","flex-col","h-screen","w-full","justify-center","items-center"],[1,"w-1/2","mx-auto","p-8","bg-white","rounded-lg","shadow-lg"],[1,"space-y-4"],[1,"flex","justify-center","items-center","h-32","text-gray-600"],[1,"text-3xl","font-bold","text-gray-800","text-center"],[1,"text-center"],[1,"text-lg","font-medium","text-gray-600"],[1,"text-lg","text-gray-600"],[1,"bg-gray-50","p-4","rounded-lg","mt-6"],[1,"flex","justify-between","mt-6","space-x-2"],[1,"w-full","py-2","px-4","bg-blue-500","hover:bg-blue-600","text-white","rounded-lg","font-semibold",3,"click"],[1,"w-full","py-2","px-4","bg-red-500","hover:bg-red-600","text-white","rounded-lg","font-semibold",3,"click"],[1,"text-lg","font-semibold","text-gray-700"],[1,"mt-2","space-y-2","ml-3"],[1,"text-gray-600"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1),x(2,_e,18,4,"div",2)(3,ve,3,0,"div",3),o()()),e&2&&(l(2),f(i.employee()?2:3))},dependencies:[ae],changeDetection:0})};function be(r,t){r&1&&(n(0,"span"),a(1,"Current password is required."),o())}function Ee(r,t){if(r&1&&(n(0,"div",7),x(1,be,2,0,"span"),o()),r&2){let e,i=u();l(),f(!((e=i.passwordForm.get("currentPassword"))==null||e.errors==null)&&e.errors.required?1:-1)}}function Se(r,t){r&1&&(n(0,"span"),a(1,"New password is required."),o())}function Fe(r,t){r&1&&(n(0,"span"),a(1,"New password must be at least 6 characters long."),o())}function Pe(r,t){if(r&1&&(n(0,"div",7),x(1,Se,2,0,"span")(2,Fe,2,0,"span"),o()),r&2){let e,i,s=u();l(),f(!((e=s.passwordForm.get("newPassword"))==null||e.errors==null)&&e.errors.required?1:-1),l(),f(!((i=s.passwordForm.get("newPassword"))==null||i.errors==null)&&i.errors.minlength?2:-1)}}function Me(r,t){r&1&&(n(0,"span"),a(1,"Confirm password is required."),o())}function De(r,t){r&1&&(n(0,"span"),a(1,"Passwords do not match."),o())}function Te(r,t){if(r&1&&(n(0,"div",7),x(1,Me,2,0,"span")(2,De,2,0,"span"),o()),r&2){let e,i,s=u();l(),f(!((e=s.passwordForm.get("confirmPassword"))==null||e.errors==null)&&e.errors.required?1:-1),l(),f(!((i=s.passwordForm.get("confirmPassword"))==null||i.errors==null)&&i.errors.passwordMismatch?2:-1)}}var J=class r{authService=m(ue);dialog=m(S);isLoading=v(!1);passwordForm=new O({currentPassword:new h("",c.required),newPassword:new h("",[c.required,c.minLength(6)]),confirmPassword:new h("",[this.passwordMatchValidator().bind(this),c.required])});ngOnInit(){}passwordMatchValidator(){return t=>{let e=t.root.get("newPassword"),i=t.root.get("confirmPassword");return!e||!i||e.value===i.value?null:{passwordMismatch:!0}}}onSubmit(){if(console.log(this.passwordForm.valid),this.passwordForm.valid){this.isLoading.set(!0),console.log("Form Submitted!",this.passwordForm.value);let t=this.passwordForm.value,e={current_password:t.currentPassword,new_password:t.newPassword};this.authService.changePassword(e).pipe(X(()=>{this.isLoading.set(!1)})).subscribe({next:i=>{this.dialog.open(F,{data:{title:"Password Updated Succesfully",isCancel:!1,deleteButtonText:"OK",timeout:1e3}})},error:i=>{console.log(i),this.dialog.open(F,{data:{title:i.error.message,isCancel:!1,deleteButtonText:"OK",timeout:1e3}})}})}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=y({type:r,selectors:[["app-change-password"]],standalone:!0,features:[C],decls:22,vars:6,consts:[[1,"container","mx-auto","p-4"],[1,"flex","flex-col","w-full","justify-center","items-center","min-h-screen","bg-gray-100"],[1,"text-2xl","font-bold","mb-6","text-center","text-gray-800"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"form-group"],["for","currentPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","currentPassword","formControlName","currentPassword","placeholder","Enter Current password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],[1,"mt-2","text-xs","text-red-600"],["for","newPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Enter New password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["for","confirmPassword",1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirm your password",1,"w-full","px-4","py-3","border","border-gray-300","rounded-md","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["type","submit",1,"w-full","px-4","py-3","cursor-pointer","bg-blue-500","text-white","rounded-md","hover:bg-blue-600","focus:outline-none","focus:ring-2","focus:ring-blue-500",3,"disabled"]],template:function(e,i){if(e&1&&(n(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Change Password"),o(),n(4,"form",3),d("ngSubmit",function(){return i.onSubmit()}),n(5,"div",4)(6,"label",5),a(7,"Current Password"),o(),g(8,"input",6),x(9,Ee,2,1,"div",7),o(),n(10,"div",4)(11,"label",8),a(12,"New Password"),o(),g(13,"input",9),x(14,Pe,3,2,"div",7),o(),n(15,"div",4)(16,"label",10),a(17,"Confirm Password"),o(),g(18,"input",11),x(19,Te,3,2,"div",7),o(),n(20,"button",12),a(21),o()()()()),e&2){let s,p,w;l(4),D("formGroup",i.passwordForm),l(5),f((s=i.passwordForm.get("currentPassword"))!=null&&s.errors&&((s=i.passwordForm.get("currentPassword"))!=null&&s.touched)?9:-1),l(5),f((p=i.passwordForm.get("newPassword"))!=null&&p.errors&&((p=i.passwordForm.get("newPassword"))!=null&&p.touched)?14:-1),l(5),f((w=i.passwordForm.get("confirmPassword"))!=null&&w.errors&&((w=i.passwordForm.get("confirmPassword"))!=null&&w.touched)?19:-1),l(),D("disabled",i.passwordForm.invalid||i.isLoading()),l(),_(" ",i.isLoading()?"Loading...":"Change Password"," ")}},dependencies:[$,j,L,A,G,B,K],changeDetection:0})};var It=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"home",component:W,pathMatch:"full",data:{title:"Home"}},{path:"add",component:R,pathMatch:"full",data:{title:"Add",type:"add"}},{path:"edit/:id",component:R,pathMatch:"full",data:{title:"Edit",type:"edit"}},{path:"detail/:id",component:Y,pathMatch:"full",data:{title:"Detail"}},{path:"change-password",component:J,pathMatch:"full",data:{title:"Profile"}}];export{It as EMP_ROUTES};
